<div class="app-wrapper"  th:fragment="sidebar">
    <div class="sidebar-container" id="menuCollapse">
        <div class="sidebar-header">
            <h1 class="sidebar-title">K BOOKs.</h1>
            <button class="menu-button" id="close_button">
                <span class="material-icons-outlined">close</span>
            </button>
        </div>

        <div class="sidebar-content">
            <div class="nav-section">
                <h3 class="section-title">Menu chính</h3>
                <ul class="nav-list">
                    <li class="nav-item">
                        <a class="nav-link" id="home-item-id" href="/bookseller/home">
                            <span class="material-icons-outlined">home</span>
                            <span class="nav-link-text">Trang chủ</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-link-expandable"  href="#" onclick="toggleSubmenu(event, 'submenu-loaisach')">
                            <span class="material-icons-outlined">menu_book</span>
                            <span class="nav-link-text">Loại sách</span>
                            <span class="material-icons-outlined expand-icon">expand_more</span>
                        </a>
                        <ul class="submenu" id="submenu-loaisach">
                            <li class="submenu-item" th:each="item : ${categories}">
                                <a class="submenu-link" href="#">
                                    <span th:text="${item.categoryName}"></span>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <span class="material-icons-outlined">local_offer</span>
                            <span class="nav-link-text">Khuyến mãi</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/bookseller/orders">
                            <span class="material-icons-outlined">shopping_cart</span>
                            <span class="nav-link-text">Đơn hàng</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/bookseller/wishlist">
                            <span class="material-icons-outlined">favorite</span>
                            <span class="nav-link-text">Yêu thích</span>
                        </a>
                    </li>
                </ul>
            </div>

            <th:block class="nav-section" th:if="${T(assignment.java5.ass_self.util.IsLogin).isAdmin()}">
                <h3 class="section-title">Quản lý</h3>
                <ul class="nav-list">
                    <li class="nav-item">
                        <a class="nav-link" href="/bookseller/admin/categories">
                            <span class="material-icons-outlined">category</span>
                            <span class="nav-link-text">Loại sách</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/bookseller/admin/books">
                            <span class="material-icons-outlined">inventory_2</span>
                            <span class="nav-link-text">Sách</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/bookseller/admin/users">
                            <span class="material-icons-outlined">group</span>
                            <span class="nav-link-text">Người dùng</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/bookseller/admin/orders">
                            <span class="material-icons-outlined">receipt_long</span>
                            <span class="nav-link-text">Đơn hàng</span>
                        </a>
                    </li>
                </ul>
            </th:block>

            <div class="nav-section">
                <h3 class="section-title">Thông tin</h3>
                <ul class="nav-list">
                    <li class="nav-item">
                        <a class="nav-link" href="/bookseller/profile">
                            <span class="material-icons-outlined">person_outline</span>
                            <span class="nav-link-text">Tài khoản</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <span class="material-icons-outlined">notifications_none</span>
                            <span class="nav-link-text">Thông báo</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <span class="material-icons-outlined">help_outline</span>
                            <span class="nav-link-text">Trợ giúp</span>
                        </a>
                    </li>
                </ul>
            </div>
            <th:block class="nav-section" th:if="${T(assignment.java5.ass_self.util.IsLogin).isAdmin()}">
                <h3 class="section-title">Thống kê</h3>
                <ul class="nav-list">
                    <li class="nav-item">
                        <a class="nav-link" href="/bookseller/admin/revenue">
                            <span class="material-icons-outlined">paid</span>
                            <span class="nav-link-text">Doanh thu</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/bookseller/admin/topCustomers">
                            <span class="material-icons-outlined">emoji_events</span>
                            <span class="nav-link-text">Top khách hàng</span>
                        </a>
                    </li>
                </ul>
            </th:block>
        </div>

        <div class="sidebar-footer">
            <div class="user-card">
                <div class="user-avatar-wrapper">
                    <img alt="User Profile Picture" class="user-avatar"
                         th:src="${currentUser != null && currentUser.avatar != null ? (currentUser.avatar.startsWith('http') ? currentUser.avatar : '/images/UserImages/' + currentUser.avatar)
                         : '/images/UserImages/default_avatar.jpg'}"/>
                    <span class="user-status"></span>
                </div>
                <div class="user-info" th:if="${currentUser != null}">
                    <p class="user-name" th:text="${currentUser.fullName}"></p>
                    <p class="user-email" th:text="${currentUser.email}"></p>
                </div>
                <span class="material-icons-outlined">chevron_right</span>
            </div>
        </div>
    </div>
</div>